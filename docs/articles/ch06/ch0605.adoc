:toc:
:doctype: book
:icons: font
:icon-set: font-awesome
:source-highlighter: highlightjs
:toclevels: 4
:sectlinks:
:author: "mon0mon"
:hardbreaks:

== 6.5 함수 선언 바꾸기 (Change Function Declaration)

> 다른 이름: 함수 이름 바꾸기, 함수 시그니처 바꾸기
> 1판에서의 이름 : 메서드명 변경, 매개변수 추가, 매개변수 제거

[open]
.리팩토링 이전
--
[source,kotlin]
----
fun circum(radium: Double){}
----
--

[open]
.리팩토링 이후
--
[source,kotlin]
----
fun circumference(radium: Double){}
----
--

### 배경

함수는 프로그램을 작은 부분으로 나누는 주된 수단
실질적으로 소프트웨어 시스템의 구성 요소를 조립하는 연결부 역할

연결부를 잘 정의하면 확장이 용이하지만, 잘못 정의할 때는 지속적인 방해 요인으로 작용

* 소프트웨어 동작 파악이 어려워짐
* 요구사항의 변경에 유연하게 수정하기 어려움

연결 부에서 가장 중요한 요소는 함수의 이름

* 좋은 이름을 짓는 방법은 주석을 이용하는 것
* 함수의 목적을 설명하는 과정에서, 적절한 함수의 이름을 선정할 수 있음

함수의 매개변수는 함수를 사용하는 문맥을 설정
매개변수 활용으로 다른 모듈과의 결합(coupling)을 제거할 수 있음

올바른 매개변수 선택::
정답이 존재하지 않음 (상황에 맞게끔)

### 절차

#### 간단한 절차
. 매개변수를 제겋하려거든 먼저 함수 본문에서 제거 대상 매개변수를 참조하는 곳은 없는지 확인
. 메서드 선언을 원하는 형태로 변경
. 기존 메서드 선언을 참조하는 부분을 모두 찾아서 바뀐 형태로 수정
. 테스트

변경 사항이 둘 이상이면, 나눠서 처리하는 것이 좋음

#### 마이그레이션 절차
. 이어지는 추출 단계를 수월하게 만들어야 한다면 함수의 본문을 적절히 리팩터링
. 함수 본문을 새로운 함수로 추출^6.1절^한다.
* 새로 만들 함수 이름이 기존 함수와 같다면 일단 검색하기 쉬운 이름로 임시 지정
. 추출한 함수에 매개변수를 추가해야 한다면 '간단한 절차'를 따라 추가
. 테스트
. 기존 함수를 인라인^6.2절^
. 이름을 임시로 붙여두었다면 함수 선언 바꾸기를 한 번 더 적용해서 원래 이름으로 되돌리기
. 테스트

상속 구조 속에 있는 클래스 메서드를 변경할 때는, 다형 관계인 다른 클래스에도 변경이 적용되어야 함
상황이 복잡하기에 간접 호출 방식으로 우회하는 방법도 사용
먼저 원하는 형태의 메서드를 새로 만들어서, 원래 함수를 호출하는 전달(forward) 메서드로 활용

* 단일 상속 구조일 경우 전달 메서드를 슈퍼클래스에 정의 (덕 타이핑 duck typing)


### 예시

include::../subsections/ch06/05/ch0605_01.adoc[]

include::../subsections/ch06/05/ch0605_02.adoc[]

include::../subsections/ch06/05/ch0605_03.adoc[]

include::../subsections/ch06/05/ch0605_04.adoc[]

